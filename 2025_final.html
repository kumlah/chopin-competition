<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <title>2025ショパコン ファイナル集計</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/chopin-competition/assets/css/style.css">
    <style>
      table{ width:100%; border-collapse:collapse; margin-top:1rem; font-size:0.9rem; }
      th,td{ border:1px solid #ccc; padding:0.4rem; }
      th{ background:#f0f0f0; }
      .sort-icon{ cursor:pointer; margin-left:0.3rem; color:#555; }
      .sort-icon.active{ font-weight:bold; color:#000; }
      .thumb-img{ width:120px; aspect-ratio:16/9; object-fit:cover; }
    </style>
  </head>
  <body>
    <header class="page-header">
      <h1 class="project-name"><a href="/chopin-competition/" style="color:white;">ショパコン勝手にYouTube聴衆賞(非公式)</a></h1>
      <h2 class="project-tagline">ファイナルの再生回数を集計しています</h2>
    </header>
    <main id="content" class="main-content">
<h1>第19回(2025) ショパンコンクール ファイナル再生数</h1>
<p>集計日: 2025年11月17日(月) ／ 対象: 11 名</p>
      <table>
        <thead>
          <tr>
            <th>名前              <span class='sort-icon' data-key='pianistSortKey' data-dir='asc' data-type='string'>▲</span>              <span class='sort-icon' data-key='pianistSortKey' data-dir='desc' data-type='string'>▼</span>            </th>
            <th>再生回数              <span class='sort-icon' data-key='viewCount' data-dir='asc' data-type='number'>▲</span>              <span class='sort-icon' data-key='viewCount' data-dir='desc' data-type='number'>▼</span>            </th>
            <th>高評価数              <span class='sort-icon' data-key='likeCount' data-dir='asc' data-type='number'>▲</span>              <span class='sort-icon' data-key='likeCount' data-dir='desc' data-type='number'>▼</span>            </th>
            <th>最終結果              <span class='sort-icon' data-key='finalSortCategory' data-dir='asc' data-type='number'>▲</span>              <span class='sort-icon' data-key='finalSortCategory' data-dir='desc' data-type='number'>▼</span>            </th>
            <th>動画</th>
          </tr>
        </thead>
        <tbody id='ranking-body'></tbody>
      </table>
      <footer class='site-footer'>©ショパコン勝手にYouTube聴衆賞(非公式)</footer>
    </main>
    <script>
const videos = [{"videoId": "QklhpTBNp3s", "url": "https://www.youtube.com/watch?v=QklhpTBNp3s", "publishedAt": "2025-10-20T21:29:39Z", "viewCount": 136356, "likeCount": 4609, "pianist": "David Khrikuli", "pianistSortKey": "khrikuli, david", "country": "Georgia", "finalResult": "ファイナル進出", "finalSortCategory": 1, "finalSortRankNum": 999, "finalSortPrize": 1}, {"videoId": "GFTHzzFA-TQ", "url": "https://www.youtube.com/watch?v=GFTHzzFA-TQ", "publishedAt": "2025-10-18T21:45:40Z", "viewCount": 1057313, "likeCount": 15389, "pianist": "Eric Lu", "pianistSortKey": "lu, eric", "country": "United States of America", "finalResult": "1位", "finalSortCategory": 0, "finalSortRankNum": 1, "finalSortPrize": 1}, {"videoId": "_QgvXbaLFPs", "url": "https://www.youtube.com/watch?v=_QgvXbaLFPs", "publishedAt": "2025-10-20T21:34:03Z", "viewCount": 202790, "likeCount": 2717, "pianist": "Kevin Chen", "pianistSortKey": "chen, kevin", "country": "Canada", "finalResult": "2位", "finalSortCategory": 0, "finalSortRankNum": 2, "finalSortPrize": 1}, {"videoId": "1WdkvGV7sBY", "url": "https://www.youtube.com/watch?v=1WdkvGV7sBY", "publishedAt": "2025-10-19T21:06:00Z", "viewCount": 291748, "likeCount": 6300, "pianist": "Miyu Shindo", "pianistSortKey": "shindo, miyu", "country": "Japan", "finalResult": "ファイナル進出", "finalSortCategory": 1, "finalSortRankNum": 999, "finalSortPrize": 1}, {"videoId": "BOCTW4qyDqY", "url": "https://www.youtube.com/watch?v=BOCTW4qyDqY", "publishedAt": "2025-10-20T05:09:40Z", "viewCount": 217713, "likeCount": 3925, "pianist": "Piotr Alexewicz", "pianistSortKey": "alexewicz, piotr", "country": "Poland", "finalResult": "5位", "finalSortCategory": 0, "finalSortRankNum": 5, "finalSortPrize": 1}, {"videoId": "8gphqTkmnR8", "url": "https://www.youtube.com/watch?v=8gphqTkmnR8", "publishedAt": "2025-10-20T23:54:39Z", "viewCount": 517563, "likeCount": 9583, "pianist": "Shiori Kuwahara", "pianistSortKey": "kuwahara, shiori", "country": "Japan", "finalResult": "4位", "finalSortCategory": 0, "finalSortRankNum": 4, "finalSortPrize": 1}, {"videoId": "_G0TBsTYjvQ", "url": "https://www.youtube.com/watch?v=_G0TBsTYjvQ", "publishedAt": "2025-10-19T01:46:32Z", "viewCount": 747407, "likeCount": 13809, "pianist": "Tianyao Lyu", "pianistSortKey": "lyu, tianyao", "country": "China", "finalResult": "4位、コンチェルト賞", "finalSortCategory": 0, "finalSortRankNum": 4, "finalSortPrize": 0}, {"videoId": "tYfpS1jt8ck", "url": "https://www.youtube.com/watch?v=tYfpS1jt8ck", "publishedAt": "2025-10-19T11:30:54Z", "viewCount": 60500, "likeCount": 1081, "pianist": "Tianyou Li", "pianistSortKey": "li, tianyou", "country": "China", "finalResult": "ファイナル進出", "finalSortCategory": 1, "finalSortRankNum": 999, "finalSortPrize": 1}, {"videoId": "xsVgT3vtruM", "url": "https://www.youtube.com/watch?v=xsVgT3vtruM", "publishedAt": "2025-10-19T08:03:06Z", "viewCount": 480569, "likeCount": 10428, "pianist": "Vincent Ong", "pianistSortKey": "ong, vincent", "country": "Malaysia", "finalResult": "5位", "finalSortCategory": 0, "finalSortRankNum": 5, "finalSortPrize": 1}, {"videoId": "5duUDPKSrKk", "url": "https://www.youtube.com/watch?v=5duUDPKSrKk", "publishedAt": "2025-10-19T22:59:44Z", "viewCount": 93847, "likeCount": 1823, "pianist": "William Yang", "pianistSortKey": "yang, william", "country": "United States of America", "finalResult": "6位", "finalSortCategory": 0, "finalSortRankNum": 6, "finalSortPrize": 1}, {"videoId": "omqTpiBXfnA", "url": "https://www.youtube.com/watch?v=omqTpiBXfnA", "publishedAt": "2025-10-19T20:03:02Z", "viewCount": 186151, "likeCount": 2954, "pianist": "Zitong Wang", "pianistSortKey": "wang, zitong", "country": "China", "finalResult": "3位、ソナタ賞", "finalSortCategory": 0, "finalSortRankNum": 3, "finalSortPrize": 0}];

function formatNumber(n){
  if(n===null || n===undefined) return "";
  return n.toLocaleString('ja-JP');
}

function renderTable(list){
  const tbody = document.getElementById('ranking-body');
  tbody.innerHTML = "";

  list.forEach(v=>{
    const videoUrl = v.url || `https://www.youtube.com/watch?v=${v.videoId}`;
    const thumb = `https://img.youtube.com/vi/${v.videoId}/mqdefault.jpg`;

    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${v.pianist}</td>
      <td>${formatNumber(v.viewCount)}</td>
      <td>${formatNumber(v.likeCount)}</td>
      <td>${v.finalResult}</td>
      <td>
        <a href="${videoUrl}" target="_blank" rel="noopener noreferrer">
          <img src="${thumb}" class="thumb-img">
        </a>
      </td>
    `;
    tbody.appendChild(tr);
  });
}

function sortList(key,dir,type){
  const sorted = [...videos].sort((a,b)=>{
    let va = a[key], vb = b[key];

    // 最終結果ソートの場合は複合キーを優先
    if(key==="finalSortCategory"){
      const A = [a.finalSortCategory, a.finalSortRankNum, a.finalSortPrize, a.pianistSortKey];
      const B = [b.finalSortCategory, b.finalSortRankNum, b.finalSortPrize, b.pianistSortKey];
      return dir==="asc"
        ? A.toString().localeCompare(B.toString(),"ja")
        : B.toString().localeCompare(A.toString(),"ja");
    }

    if(type==="number"){
      va = parseFloat(va)||0;
      vb = parseFloat(vb)||0;
      return dir==="asc" ? va - vb : vb - va;
    }else{
      return dir==="asc"
        ? String(va).localeCompare(String(vb),"ja")
        : String(vb).localeCompare(String(va),"ja");
    }
  });

  renderTable(sorted);
}

function initSort(){
  const icons = document.querySelectorAll(".sort-icon");
  icons.forEach(ic=>{
    ic.addEventListener("click",()=>{
      icons.forEach(i=>i.classList.remove("active"));
      ic.classList.add("active");

      const key = ic.getAttribute("data-key");
      const dir = ic.getAttribute("data-dir");
      const type = ic.getAttribute("data-type");
      sortList(key,dir,type);
    });
  });
}

// 初期表示：再生回数降順
document.addEventListener("DOMContentLoaded",()=>{
  initSort();
  sortList("viewCount","desc","number");
});

    </script>
  </body>
</html>